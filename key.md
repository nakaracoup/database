# KEY

데이터베이스에서 조건에 만족하는 튜플을 찾거나 순서대로 정렬할 때 다른 튜플들과 구별할 수 있는 유일한 기준이 되는 속성

### 1. Candidate Key (후보 키)

- 튜플을 유일하게 식별할 수 있는 속성들의 집합
- 유일성과 최소성을 만족시켜야 한다.
    - 유일성 : candidate key로 다른 튜플과 구분이 가능해야 함.
    - 최소성: 꼭 필요한 최소한의 속성들로만 키를 구성하는 것
        - 이미 pk 자격을 가진 후보키들로 복합키를 만드는 경우 최소성을 위배한 것임.

### 2. Primary Key (기본 키)

- 후보키 중에서 선택한 주 키(Main Key)
- Null 값을 가질 수 없다. (개체 무결성)
- 유일해야 한다. (개체 무결성)
    - 개체 무결성: 중복된 행이 존재하지 않도록 규정하는 것.

### 3. Alternate Key (대체 키)

- 후보키가 둘 이상일 때 primary key를 제외한 나머지 후보키들을 말함.
- 보조 키라고도 부름

### 4. Super Key (슈퍼 키)

- 유일성만 만족하면 슈퍼키가 될 수 있음.
    - 최소성 만족하지 않아도 X
- 예를 들어, 주민번호 + 학번으로 키를 만들 수도 있음

### 5. Foreign Key

- 테이블 간의 관계를 표시하기 위해, 들고 있는 다른 테이블의 pk를 말한다.
- 다른 테이블의 데이터를 참조할 때 없는 값을 참조할 수 없도록 제약을 줌.
    - fk를 걸면, 참조하고 있는 튜플들이 모두 삭제되고 난 이후에, 참조되고 있는 튜플이 삭제될 수 있다.
- 참조 무결성
    - 행을 입력, 수정, 삭제할 때 연관되는 다른 테이블과의 데이터가 정확하게 유지되도록 규정하는 것.
    - 참조 관계에 있는 두 테이블의 데이터가 항상 일관된 값을 가져야 함.

### 별도 : 외래키를 사용하지 않는 이유

### 1. 성능 저하

외래키를 사용하게 되면 데이터 생성 및 수정 시 항상 무결성 검사를 하게 됨. 자식 테이블에 데이터 추가 시 부모 테이블 pk 존재하는 지를 검사. 이러한 무결성 검사는 cud에 대한 성능 저하를 일으킴

### 2. 개발 단계에서의 용이함을 위해

- 프로그램의 비즈니스 로직이 바뀌거나 서비스가 확장되었을 때 이 외래키의 제약 조건 때문에 에러가 일어날 수 있음.
- 확장성 및 개발 편의성

### 별도 생각

- 개발 단계에서는 제약 조건 비활성화, 배포에서는 데이터 정합성을 유지하기 위해 활성화해야 하지 않나.
- DB에서 외래키를 검사하지 않는다면, 어플리케이션 단의 cud 로직에서 test code를 꼭 작성해야 한다고 생각함.
- Data Integrity는 trade-off 대상이 아니지 않나.
    - data integrity가 어긋나도 상관 없는 도메인은 없지 않나.
    

[외래키의 장점과 단점 및 논의](https://velog.io/@subutai/%EB%A7%A4%EC%9D%BC-2day)

[Foreign Key 없이 구축하는 관계형 데이터베이스 시스템에 대한 생각](https://engineering-skcc.github.io/oracle%20tuning/foreign_key_%EC%97%86%EC%9D%B4_%EA%B5%AC%EC%B6%95%ED%95%98%EB%8A%94_DB/)
